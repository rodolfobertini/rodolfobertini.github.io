<html>
<head>
  <title>Chat iFood - Grupo Azilados</title>
</head>
<body>
  <h1>Configurar iFood Widget</h1>
  <label for="storeCount">NÃºmero de Lojas:</label>
  <input type="number" id="storeCount" min="1" max="10" value="1">
  <div id="merchantInputs"></div>
  <button id="initializeWidget">Inicializar Widget</button>

  <!-- Start of iFood Widget script-->
  <script async src="https://widgets.ifood.com.br/widget.js"></script>
  <script>
    document.getElementById('storeCount').addEventListener('input', function() {
      const storeCount = parseInt(this.value, 10);
      const merchantInputs = document.getElementById('merchantInputs');
      merchantInputs.innerHTML = ''; // Limpa entradas existentes

      for (let i = 0; i < storeCount; i++) {
        const input = document.createElement('input');
        input.type = 'text';
        input.placeholder = `Merchant ID ${i + 1}`;
        input.id = `merchantId${i}`;
        merchantInputs.appendChild(input);
        merchantInputs.appendChild(document.createElement('br'));
      }
    });

    document.getElementById('initializeWidget').addEventListener('click', function() {
      const storeCount = parseInt(document.getElementById('storeCount').value, 10);
      const merchantIds = [];

      for (let i = 0; i < storeCount; i++) {
        const merchantId = document.getElementById(`merchantId${i}`).value;
        if (merchantId) {
          merchantIds.push(merchantId);
        }
      }

      if (merchantIds.length > 0) {
        iFoodWidget.init({
          widgetId: '5c61ae8b-74ea-4b30-a42b-14c251e6c0d4',
          merchantIds: merchantIds,
        });
      } else {
        alert('Por favor, insira pelo menos um Merchant ID.');
      }
    });
  </script>
  <!-- End of iFood Widget script -->
</body>
</html>